# persistence.nvim 使い方

セッション（開いているファイル、ウィンドウレイアウトなど）を自動保存・復元するプラグイン。

## キーマップ

| キー | 説明 |
|------|------|
| `<leader>qs` | 現在のディレクトリのセッションを復元 |
| `<leader>ql` | 最後に使ったセッションを復元 |

## 自動保存の動作

- Neovim終了時に自動でセッションを保存
- セッションはディレクトリごとに保存される
- 保存先: `~/.local/state/nvim/sessions/`

## 保存される内容

- 開いているバッファ
- ウィンドウのレイアウト
- カーソル位置
- タブページ
- 折りたたみ状態

## 典型的なワークフロー

### プロジェクト作業の継続

1. プロジェクトディレクトリで作業
2. 複数ファイルを開いてウィンドウを配置
3. Neovimを閉じる（自動保存される）
4. 後日、同じディレクトリで `nvim` を起動
5. `<leader>qs` でセッション復元
6. 前回の状態が復元される

### 最後のセッションを復元

1. どこからでも `nvim` を起動
2. `<leader>ql` で最後に作業していたセッションを復元

## コマンド

```vim
:lua require("persistence").load()                " 現在ディレクトリのセッション復元
:lua require("persistence").load({ last = true }) " 最後のセッション復元
:lua require("persistence").stop()                " 自動保存を停止（今回のみ）
```

## Tips

- 一時的な作業で保存したくない場合は `:lua require("persistence").stop()` を実行
- セッションファイルは `~/.local/state/nvim/sessions/` で確認可能
- ディレクトリのフルパスがファイル名にエンコードされている
