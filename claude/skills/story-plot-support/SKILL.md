---
name: story-plot-support
description: >
  物語のプロット作成を、長期/中期/短期スパンの索引に従って支援する。
  長期: シリーズログライン/終点固定/タイムラインA-B/設定台帳/伏線台帳/巻×筋マトリクス。
  中期: 8シークエンス/三幕・STC・Hauge/Truby・McKee点検/アウトライン階層。
  短期: ステップアウトライン/シーンカード/Goal-Conflict-Turn-Button/Value Shift/章×筋マトリクス。
  既存プロットの破綻検出（矛盾・中だるみ・伏線回収漏れ・筋の放置）も行う。
---

# Story Plot Support

## 目的
ユーザーが「迷子にならず」「破綻せず」「書ける速度で」プロットを作れるように、
索引に基づいて **適切な手法セットを選び**、**成果物（ファイル）として永続化**する。

## 起動トリガー例
- 「プロット作りたい / アウトライン作りたい / 伏線管理したい」
- 「8シークエンスで組みたい」「章×筋マトリクス作って」
- 「中だるみを直したい」「整合性チェックして」「回収漏れが怖い」

## 基本原則（このSkillが必ず守る）
1. **まず"スパン"を確定**：長期 / 中期 / 短期（混在なら"今いちばん困ってる層"を優先）
2. **次に"状況"で手法を自動選択**：A〜E（群像/整合性/成長譚/テンポ/設計過多）
3. 迷ったら **推奨三層スタック**：
   - 長期：タイムライン + 伏線台帳
   - 中期：8シークエンス
   - 短期：シーンカード（G/C/T/B + Value Shift）
   - 群像なら短期に 章×筋マトリクス追加
4. **二重管理しない**：構造データのSource of Truthは `plot.yml`（YAML）。
   Markdownは"見やすいビュー"として生成/更新する。
5. **書ける速度を優先**：設計が詰まったら「打ち止めライン」に従って短期へ降りる。

---

## 0) 受付（最小質問・最大5つ）
初回は `resources/intake.md` の「1分質問セット」を提示して回答を回収する。
ユーザーが未指定でも作業は止めない（仮置きで進め、TBDで明示する）。

- 作品形態：シリーズ/単巻/映画/TVシーズン
- ジャンル：群像/ミステリ・陰謀/SF/成長譚/その他
- 主人公と外的ゴール（1行で）
- だいたいの分量：巻数/話数/章数（未定OK）
- いま困ってること：迷子/整合性/中だるみ/伏線/書けない

---

## 1) プロジェクト作成（永続化）
リポジトリ内に `plots/<project_slug>/` を作る（既存なら再利用）。
永続化ポリシーは `resources/persistence.md` に従う。
初回に「新規 / 途中（Import）」を判定し、Importの場合は `sources/` に原文保存してから `plot.yml` を作る。

推奨ファイル:
- `plot.yml`（唯一の正本）
- `intake.yml`（初回質問の回答）
- `sources/`（Import時の原文保存・上書き禁止）
- `snapshots/`（マイルストーン保存）
- `decisions.md`（決めたことログ）
- `views/`（Markdownビュー：ログライン、マトリクス、8シークエンス、ステップアウトライン等）
- `notes.md`（ユーザーの意図、未確定事項、決めたルール）

必要なら `scripts/new_project.sh` を実行して雛形生成してよい。

---

## 2) 手法セット選択（索引の自動マッピング）
状況A〜Eを判定し、以下のプリセットから提示して選ぶ（必ず"おすすめ"を1つ出す）：

- A 群像/筋が多い：
  長期=巻/シーズン×筋マトリクス、 中期=8シークエンス、 短期=章×筋+シーンカード
- B 整合性が命（ミステリ/陰謀/SF）：
  長期=タイムラインA/B + 伏線台帳 + 設定台帳、 中期=Truby or McKee、 短期=提示順+G/T
- C 成長譚：
  長期=HJ or ストサー、 中期=三幕 or 6ステージ or STC、 短期=Value Shift中心
- D 中だるみ：
  中期=8シークエンスで弱い塊特定、 短期=G/C/Tで動かないシーンを削る/統合
- E 設計過多で書けない：
  中期=アウトライン階層を打ち止め、 短期=シーンカードへ即降り、 長期=終点1段落のみ確定

---

## 3) 成果物生成（層ごとに"最低限"を完成させる）
### 長期（最低限の完成条件）
- シリーズログライン（1文）
- ラストの状態（1段落）
- タイムラインA（客観）/B（提示）
- 伏線台帳（Plant/Payoffが必ずペア）
- （必要なら）巻/シーズン×筋マトリクス

### 中期（最低限の完成条件）
- 8シークエンス（S1〜S8：ミニ目標/決着/次の問題）
- 節チェック（STC or 三幕 or 6ステージの"柱"だけでも）
- （複雑なら）Truby点検 or McKee価値反転の要所確認

### 短期（最低限の完成条件）
- ステップアウトライン（1行=1シーン、全列挙）
- 各シーンに G/C/T/B + Value Shift を付与（弱い場合は改善案も併記）
- 群像なら 章×筋マトリクス（最低1筋前進ルール）

---

## 4) リライト/監査モード（既存プロットの点検）
ユーザーが既存のアウトラインや原稿を渡した場合は、まず以下を機械的にチェックしてレポートする：

- 整合性：タイムラインA/B差分の破綻、因果の抜け
- 伏線：Plantのみ/Payoffのみの孤児、回収の証明が弱い
- テンポ：8シークエンスで"同種が連続"して停滞してないか
- シーン強度：G/C/T/Bが欠ける、Value Shiftが無い、Buttonが弱い
- 群像運用：3章連続空欄の筋がある（意図説明が必要）

---

## 参照リソース
- 手順の詳細: `resources/workflow.md`
- テンプレ: `resources/templates_*.md`
- チェックリスト: `resources/checklists.md`
- YAMLスキーマ: `resources/schemas.yml`
- 実例: `resources/examples.md`
- 初回質問セット: `resources/intake.md`
- 永続化ポリシー: `resources/persistence.md`

## Examples（発動例）
- 「陰謀サスペンスで、整合性と伏線が怖い。1巻分の骨格を作って」
- 「群像劇。章×筋マトリクスと、8シークエンスから先に作りたい」
- 「中だるみしてる。8シークエンスで弱い塊を特定して直して」
