---
name: nanobanana-prompt-writer
description: >
  Nano Banana（Gemini のネイティブ画像生成）向けに、用途（ロゴ/EC物撮り/サムネ/ステッカー/文字入り/ミニマル/差分編集/参照画像固定など）をヒアリングし、
  "タグ盛り"ではなく撮影・制作ブリーフ形式で一貫性の高い高品質プロンプトを作るSkill。
  ユーザーが「nanobananaで画像生成のプロンプトを作って」「Gemini画像生成の高品質プロンプト」「編集で詰めたい」「参照画像で同一性を保ちたい」等を求めたときに発動する。
---

# Nano Banana Prompt Writer（高品質プロンプト生成 Skill）

Nano Banana（Gemini ネイティブ画像生成）で"当たり"を出しやすい **ブリーフ型プロンプト**を作るためのSkill。

## Background
- Nano Banana は Gemini のネイティブ画像生成機能で、API 上は `gemini-2.5-flash-image` / `gemini-3-pro-image-preview` の2モデルとして提供される
- 生成画像には SynthID ウォーターマークが入る

---

## Goals
- 用途に最適化した **ブリーフ型プロンプト**（タグ盛りではない）を生成する
- **モデル選択（Flash / Pro）**の推奨と理由を提示する
- **差分プロンプト**（80%当たり→詰め用）を併せて提供する
- 編集/参照画像ありの場合は**編集指示テンプレ**も出力する

## Non-goals
- 画像生成の実行（プロンプト生成のみ）
- APIの実装方法の説明
- 著作権侵害や不適切コンテンツの生成支援

---

## Activation Cues（発動条件）
- 「nanobanana の高品質プロンプト作って」
- 「Gemini image generation のプロンプトを用途別に」
- 「ロゴで文字を崩さずに出したい」「バナーの文字入り画像」
- 「EC物撮りっぽい商品画像」「サムネ用の余白」
- 「参照画像で同一性（顔・キャラ）固定したい」
- 「当たりが出たので"そのまま○○だけ変える"で詰めたい（差分編集）」

---

## Core Principles（必ず守る3原則）

### 1. タグ盛りよりブリーフ
キーワード羅列ではなく、シーン/目的/制約を文章で説明して一貫性を上げる。

### 2. 当たりが出たらリロールより編集
会話的な微修正（差分指示）を優先し、最短で詰める。

### 3. 否定より"望ましい状態"
`no xxx` 連発ではなく「xxxが存在しない状態」「背景がクリーンで単色」のように"意味的な否定"で書く。

---

## Output Contract（最終出力の型）

ユーザーに返す内容は、基本的に以下をセットで出す（不足情報があっても、**仮のデフォルト**＋**選択肢**で出す）：

1. **推奨モデル**（Flash / Pro）と理由
2. **最終プロンプト（コピペ用）**
3. **aspect ratio 指定案**（API の `imageConfig.aspectRatio` を想定）
4. **詰め用の"差分プロンプト" 3本**（80%当たり→差分で詰める用）
5. （編集/参照画像ありの場合）**編集指示テンプレ**＋注意（権利）

---

## Workflow

### Step 1: 目的（Why）を確定する
ユーザー入力から、最低限これを抽出（無ければ仮置き）：
- 用途：ロゴ / EC物撮り / サムネ / UIモック / ステッカー / ポスター下地 …

### Step 2: 生成タイプを分類する
- **A. 新規生成**（0→1）
- **B. 編集（差分編集）**（元画像あり）
- **C. 参照画像で固定**（同一性/レイアウト固定）

### Step 3: モデル選択（Flash / Pro）
| モデル | 特徴 | 向いている用途 |
|--------|------|----------------|
| **Flash** (`gemini-2.5-flash-image`) | 速い・軽い・ラフ/量産向き | 3枚程度の参照、ラフ案量産 |
| **Pro** (`gemini-3-pro-image-preview`) | 複雑指示・高忠実度・文字精度 | 文字入り・ロゴ・厳密な指示 |

参照画像枚数の目安：Flashは入力3枚程度、Proは高忠実度5枚（最大14枚）。

### Step 4: "制御レバー"を上から順に埋める
以下を優先度順にプロンプトへ反映（不足はデフォルト提案）：
1. 目的/用途（Why）
2. 主役（Subject：年齢/服/素材感/雰囲気）
3. 環境（Environment：場所/時間/季節/小物）
4. 構図・カメラ（shot / angle / lens / DoF）
5. 光・ムード（lighting / color temperature）
6. スタイル（sticker / minimalist / technical diagram …）
7. 制約（背景/余白/禁止要素：否定ではなく望ましい状態）
8. アスペクト比（`imageConfig.aspectRatio` で指定）

### Step 5: 用途別テンプレに当てはめる
- `resources/templates.md` を参照し、該当テンプレを適用する

### Step 6: 詰め方（80%当たり→差分）
最終出力に必ず「差分プロンプト例」を3つ付ける：
- 「構図はそのまま、光だけ夕焼けに」
- 「服だけ変更、表情は維持」
- 「背景だけ単色化、被写体は維持」

---

## Quality Checklist
- [ ] タグ羅列ではなくブリーフ形式になっているか
- [ ] 否定語（no xxx）を使わず「望ましい状態」で書いているか
- [ ] モデル推奨（Flash/Pro）と理由が明記されているか
- [ ] aspect ratio が用途に適切か
- [ ] 差分プロンプトが3本以上あるか
- [ ] 文字入りの場合、引用符で文言が固定されているか
- [ ] 編集の場合、権利に関する注意書きがあるか

---

## Examples

### Example 1: 写実（日本語）
**User**: 「雨上がりの渋谷の路地、夜。映画っぽく」

**Output**:
- 推奨: Flash（まず量産）→当たりでPro/編集
- aspectRatio: 16:9
- Prompt + 差分プロンプト3本

### Example 2: ロゴ（文字入り）
**User**: 「コーヒー店 'The Daily Grind' のロゴ」

**Output**:
- 推奨: Pro（文字精度重視）
- Text: "The Daily Grind" を厳密指定
- 背景/余白/タイポ方針を明示
- 差分：フォントだけ/アイコンだけ/配色だけ変更

### Example 3: EC物撮り
**User**: 「ワイヤレスイヤホンの商品写真、白背景で」

**Output**:
- 推奨: Flash（まず量産）
- aspectRatio: 1:1 or 4:5
- スタジオライト構成、角度、見せたい特徴を明示

### Example 4: 参照画像で同一性固定
**User**: 「この顔のまま別のポーズで」

**Output**:
- 推奨: Pro（同一性維持）
- Identity Locking テンプレを適用
- 権利に関する注意書き付き

---

## Notes
- 生成物には SynthID watermark が入る前提で扱う
- 文字入りは「文字列を引用符で固定」し、崩れる場合は「先に文言→画像」の2段階を提案する
- ユーザー情報不足でも止まらず、**デフォルト案＋選択肢（A/B）**で提示する

---

## References
- `resources/templates.md` - 用途別プロンプトテンプレート
- `resources/references.md` - 公式ドキュメント参照情報
